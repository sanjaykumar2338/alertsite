!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("scc-c2",[],e):"object"==typeof exports?exports["scc-c2"]=e():t["scc-c2"]=e()}(self,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e);var n={};t.r(n),t.d(n,{_isDebug:()=>d,debug:()=>O,error:()=>g,info:()=>m,log:()=>m,setDebug:()=>b,warn:()=>w});var r={};t.r(r),t.d(r,{cmdLogEvent:()=>Bo,cmdLogPerf:()=>qo});var o,i,a,c,u,f=(o="",a={document:i=Object.create({get cookie(){return o},set cookie(t){o=t}})},c={},"undefined"==typeof window?{window:a,document:i,navigator:c}:{window:window||a,document:window.document||i,navigator:navigator||c}),s=function(){return f.window},l=function(){return f.document},p=function(){return f.navigator},y=function(){var t=s().location;return t&&t.hostname?t.hostname:""},v=function(){var t=y(),e=t.split(".");return e.length>=2&&"co.uk"===(t=e.splice(e.length-2).join("."))&&(t="".concat(e.pop(),".").concat(t)),t},d=!1,b=function(t){d=!0===t||"true"===t},h=function(t){return s().console,function(){}},m=h(),g=h(),w=h(),O=function(){if(d){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];m.apply(null,e)}},j=function(t){if(s()[u])return s()[u][t]},S=function(t,e){s()[u]&&(s()[u][t]=e)},_=function(t,e){s()[t]=e,S(t,e)};function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===k(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}var T=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];try{if(e(n,r))return t}catch(t){}}return t},C=function(){for(var t={},e=0;e<arguments.length;e++){var n=e<0||arguments.length<=e?void 0:arguments[e];"object"===k(n)&&T(n,(function(e,n){t[e]=n}))}return t},x=function t(e){for(var n in e)void 0===e[n]?delete e[n]:"object"===k(e[n])&&(t(e[n]),0===Object.keys(e[n]).length&&delete e[n]);return e},R=function(t){if(2===t.length)return t[1]},I=function(t,e,n){if("string"!=typeof t)return{};for(var r={},o=t.split(e),i=0;i<o.length;i++){var a=o[i].split(n);r[a[0]]=R(a)}return r},L=function(t,e,n){var r=[];return T(t,(function(t,e){r.push("".concat(t).concat(n).concat(e))})),0===r.length?"":r.join(e)},D=function t(e,n){return n&&(e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){E(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e)),Object.keys(e).forEach((function(r){if("object"===k(e[r])){var o=t(e[r],n);n&&(e[r]=o)}})),Object.freeze(e)},A=function(t,e){if(void 0===t)return t;void 0===e&&(e=2);for(var n=String(t);n.length<e;)n="0"+n;return n},M=function(t){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]||void 0!==t)return!0===t||1===t||"string"==typeof t&&("true"===t.toLowerCase()||"1"===t)},B=function(t){var e=parseInt(t,10);if(!isNaN(e))return e},q=function(){return e=(t=new Date).getUTCFullYear()+"-"+A(t.getUTCMonth()+1),e+="-"+A(t.getUTCDate())+"T"+A(t.getUTCHours())+":",(e+=A(t.getUTCMinutes())+":"+A(t.getUTCSeconds())+".")+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z";var t,e},F=function(t){return"[object Array]"===Object.prototype.toString.call(t)},U=function(t,e){F(t)&&t.push({timestamp:q(),data:e})};function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G(r.key),r)}}function G(t){var e=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===V(e)?e:String(e)}const z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.properties=e?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=G(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e):{}}var e,n;return e=t,(n=[{key:"clear",value:function(){this.properties={}}},{key:"get",value:function(t){if(this.properties.hasOwnProperty(t))return this.properties[t]}},{key:"set",value:function(t,e){this.properties[t]=e}},{key:"isSet",value:function(t){if(this.properties.hasOwnProperty(t))return!0}},{key:"delete",value:function(t){delete this.properties[t]}},{key:"getProperties",value:function(t){var e={},n=function(){return!1};return t||"function"!=typeof t||(n=t),T(this.properties,(function(t,r){n(t)||(e[t]=r)})),e}},{key:"merge",value:function(e){var n=this,r=e;r instanceof t&&(r=e.getProperties()),T(r,(function(t,e){n.set(t,e)}))}}])&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var W,$={},H={"first-paint":"fp","first-contentful-paint":"fcp"},Q=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","navigationStart","requestStart","responseEnd","responseStart","loadEventStart","loadEventEnd"],J=["transferSize","encodedBodySize","decodedBodySize"],Z=function(t,e){for(var n={},r=0;r<e.length;r++){var o=e[r],i=t[o];void 0!==i&&(n[o]=Math.round(i))}return n},X=function(t){return Z(t,Q)},Y=function(t){return Z(t,J)},tt=function(t,e){var n=new z;"tcc"===t&&n.set("tccin",e||"na");try{(W=s().performance)&&W.timing?(function(t){if(t.merge(X(W.timing)),W.getEntriesByName){var e=W.getEntriesByName(l().location.href)[0];if(!e&&W.getEntriesByType){var n=W.getEntriesByType("navigation");e=n[n.length-1]}e&&(t.merge(Y(e)),t.set("navigationType",e.type))}}(n),"tcc"===t&&(function(t){if(W.getEntriesByType){var e=W.getEntriesByType("mark");if(F(e)){t.set("marks",e.slice(0,10).map((function(t){return{name:t.name,startTime:Math.round(t.startTime)}})));var n=W.getEntriesByType("measure");F(n)&&t.set("measures",n.slice(0,10).map((function(t){return{name:t.name,duration:Math.round(t.duration)}})))}}}(n),function(t){if(W.getEntriesByType){var e=W.getEntriesByType("paint");e&&e.forEach((function(e){t.set(H[e.name],Math.round(e.startTime))}))}}(n))):("tcc"===t&&n.set("tccperfapi","not supported"),g("Error loading performance lib"))}catch(t){g("_collect unable to get performance data",t)}return n.getProperties()},et=function(t,e,n){setTimeout((function(){s()._expDataLayer=s()._expDataLayer||[],s()._expDataLayer.push({schema:"add_perf",version:"v1",data:"tcc"===t?{type:"pageperf",properties:C(e,$,{nav_type:"hard"}),custom_properties:n}:{timing_object:C(e,$),is_hard_navigation:!0,custom_properties:n}})}),0)},nt=function(){return!(W=s().performance)||!W.timing||W.timing.loadEventStart>0},rt=!1;function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ot(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ot(o)?o:String(o)),r)}var o}var at,ct=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._loaded=!1,this._onLoadFns=[],e?this._loaded=!0:n(this._triggerOnLoad.bind(this))}var e,n;return e=t,(n=[{key:"_executeFn",value:function(t){try{t()}catch(e){g("Exception while executing onLoad callback",t,e)}}},{key:"_triggerOnLoad",value:function(){this._loaded=!0;for(var t=0;t<this._onLoadFns.length;t++)this._executeFn(this._onLoadFns[t])}},{key:"registerOnLoadFn",value:function(t){(function(t){return t&&"[object Function]"==={}.toString.call(t)})(t)&&(this._loaded?this._executeFn(t):this._onLoadFns.push(t))}}])&&it(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ut=s().Request,ft=ut&&"keepalive"in new ut(""),st=void 0!==p().sendBeacon,lt=function(t,e,n,r,o,i,a){var c,u=C({},i),f=r?JSON.stringify(r):null;if("POST"===n&&(u["Content-Type"]="application/json"),st&&!u.Authorization&&"POST"===n)try{var l=s().Blob;c=p().sendBeacon(t,new l([f],u))}catch(t){c=!1}c||function(t,e,n,r,o){var i=s().fetch;ft&&i?i(t,{keepalive:!0,method:e,headers:r,body:n,credentials:o}).catch((function(t){})):function(t,e,n,r){var o=s().XMLHttpRequest;if(o){var i=new o;i.open(e,t,!0),T(r,(function(t,e){i.setRequestHeader(t,e)})),i.send(n)}}(t,e,n,r)}(t,n,f,u,a),function(t,e,n,r,o){var i={endpoint:e,queryParams:n,method:r,payload:o};U(j(t),i)}(o,t,e,n,r)},pt=function(t,e){var n=j("config")[t];if(n&&e)return n[e]},yt=[{name:"EMAIL",regex:/[^@^=]+@[^@]+\.[^@^&]+/}],vt=function(t,e){if("string"!=typeof t)return t;for(var n=t,r=0;r<yt.length;r++)for(var o=yt[r].regex,i=n.match(o);i&&i[0];)i=(n=n.replace(i[0],"REDACTED")).match(o);return n},dt=function(t){return""===(t=t||s().location.search)?[]:("?","?"===t.substr(0,1)&&(t=t.substring(1)),t.split("&"))},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://".concat(t?t+".":"").concat(function(){if(at)return at;var t=v();if("secureserver.net"===(t=function(t){var e=t||v();return e.indexOf("godaddy.com")>=0||e.indexOf("secureserver.net")>=0}(t)?t:"secureserver.net")){var e=pt("build","env");t="prod"===e?t:"".concat(e,"-").concat(t)}return at=t}())};function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(t,e)||gt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){if(t){if("string"==typeof t)return wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ht(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ht(o)?o:String(o)),r)}var o}const jt=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._eventQueue=[],this._sendBatchCallback=e,this._maxEvents=r,this._bindUnload(),this._processInterval=setInterval((function(){n._sendBatch()}),250)}var e,n;return e=t,(n=[{key:"_bindUnload",value:function(){var t=this,e=this.flush.bind(this),n=s().attachEvent,r=s().addEventListener,o=l().addEventListener;r?(r("beforeunload",e,!1),r("pagehide",e,!1)):n&&n("beforeunload",e),o&&o("visibilitychange",function(){"hidden"===l().visibilityState&&t.flush()}.bind(this))}},{key:"_sendRequests",value:function(t){var e=this;Object.entries(t).forEach((function(t){var n=mt(t,2),r=n[0],o=n[1];try{var i=mt(r.split("|"),2),a=i[0],c={schemaId:i[1],data:[]};Object.values(o).forEach((function(t){if(t.events.length>10)for(var e=t.events.length/10,n=0;n<e;n++)c.data.push(C(t,{events:t.events.slice(10*n,10*n+10)}));else c.data.push(t)})),e._sendBatchCallback(c,a)}catch(t){g("Failed to send request: ".concat(t))}}))}},{key:"pushEvent",value:function(t,e){e||!ft&&!st?this._sendBatch(t):this._eventQueue.push(t)}},{key:"_getRequestBatch",value:function(t,e,n){var r=n.apiKey,o=n.schemaId,i=n.global,a=n.contextVersion,c=n.businessContext,u="".concat(r,"|").concat(o),f=t[u]||{};t[u]=f;var s=0;c&&(e.push(c),s=e.length);var l="".concat(a,"|").concat(s);return{batch:f[l]||{global:i,businessContext:c,events:[]},batchKey:l,request:f}}},{key:"_processEvent",value:function(t,e,n){var r,o,i=this._getRequestBatch(t,e,n),a=i.batch,c=i.batchKey,u=i.request;return(r=a.events).push.apply(r,function(t){if(Array.isArray(t))return wt(t)}(o=n.events.slice(0,this._maxEvents))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||gt(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n.events.length>this._maxEvents&&this.pushEvent(C(n,{events:n.events.slice(this._maxEvents)})),u[c]=a,Math.min(n.events.length,this._maxEvents)}},{key:"_sendBatch",value:function(t){var e=0,n={},r=[];for(t&&(e+=this._processEvent(n,r,t));this._eventQueue.length>0&&e<this._maxEvents;)e+=this._processEvent(n,r,this._eventQueue.shift());this._sendRequests(n)}},{key:"flush",value:function(){for(;this._eventQueue.length>0;)this._sendBatch()}}])&&Ot(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var St,_t="_eventBusSendLog",Pt=function(t,e){lt("".concat(bt("csp"),"/eventbus"),null,"POST",t,_t,{Authorization:"api-key ".concat(e)})};function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Et(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Et(o)?o:String(o)),r)}var o}function Tt(){return Tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Tt.apply(this,arguments)}function Ct(t,e){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ct(t,e)}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}var Rt=function(t){try{return JSON.parse(t)}catch(t){return{}}};const It=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ct(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=xt(r);if(o){var n=xt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._updateWindow(),e}return e=a,(n=[{key:"_updateWindow",value:function(){S("config",D(this.properties,!0))}},{key:"set",value:function(t,e){Tt(xt(a.prototype),"set",this).call(this,t,e),this._updateWindow()}},{key:"merge",value:function(t){Tt(xt(a.prototype),"merge",this).call(this,t),this._updateWindow()}}])&&kt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(z))({build:{env:"prod",date:"2024-02-29T09:31:49.540Z"},client:{name:"scc-c2",version:"0.2.3"},cookie:{sameSite:"none"},site:{privateLabelId:""},sGtm:{enabled:M(""),whitelist:Rt(""),account:"",host:""},ga:{account:""},wGtm:{enabled:M(""),whitelist:Rt(""),account:""},eventBus:{enabled:M("true"),sccApiKey:"b18ef4f046435b64a469b32c3c1c20a3",rigorApiKey:"8da2217409854bee82e12dc4ca0b39fb"},clickListener:{enabled:!0,navDelayMs:75},timing:{auto:!0},webVitals:{enabled:!0,url:""},consent:{delayMs:500}});var Lt,Dt,At,Mt=function(t,e){var n=It.get(t);if(n&&e)return n[e]},Bt=function(t,e,n){var r=It.get(t),o=r||{};r||It.set(t,o),o[e]=n};function qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ft,Ut,Vt=[],Nt={},Kt=0,Gt=function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return qt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(Ft);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t.startsWith("".concat(r,".")))return!1}}catch(t){n.e(t)}finally{n.f()}return!0},zt=function(t,e){"debug"===t&&b(e)},Wt=function(){var t,e,n=function(){for(var t={},e=0;e<Dt.length;e++){var n=Dt[e];T(n,(function(e,n){-1===Ut.indexOf(e.toLowerCase())&&(zt(e,n),Gt(e)||(t[e]=n))}))}return t}();e={identity:{realm:(t=n)["".concat(Lt,".realm")]},site:{privateLabelId:t["".concat(Lt,".privateLabelId")]},timing:{auto:!M(t["".concat(Lt,".manualPagePerf")],!1)},page:{spa:t["".concat(Lt,".spa")],id:t["".concat(Lt,".pageId")],contentGroup:t["".concat(Lt,".gaContentGroup")]||t["".concat(Lt,".contentGroup")],referrerExclusion:t["".concat(Lt,".referrerExclusion")]},cookie:{sameSite:t["".concat(Lt,".cookies.sameSite")]},wGtm:{enabled:M(t["".concat(Lt,".webGtmEnabled")],!1)},clickListener:{enabled:!M(t["".concat(Lt,".listenerDisabled")],!1),navDelayMs:t["".concat(Lt,".eventDelayMs")]}},Object.keys(e).forEach((function(t){Object.keys(e[t]).forEach((function(n){var r=e[t][n];void 0!==r&&Bt(t,n,r)}))})),It.merge(n),U(Vt,n)};const $t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Ht;const Qt=new Uint8Array(16);function Jt(){if(!Ht&&(Ht="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ht))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ht(Qt)}const Zt=[];for(let t=0;t<256;++t)Zt.push((t+256).toString(16).slice(1));const Xt=function(t,e,n){if($t.randomUUID&&!e&&!t)return $t.randomUUID();const r=(t=t||{}).random||(t.rng||Jt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return function(t,e=0){return Zt[t[e+0]]+Zt[t[e+1]]+Zt[t[e+2]]+Zt[t[e+3]]+"-"+Zt[t[e+4]]+Zt[t[e+5]]+"-"+Zt[t[e+6]]+Zt[t[e+7]]+"-"+Zt[t[e+8]]+Zt[t[e+9]]+"-"+Zt[t[e+10]]+Zt[t[e+11]]+Zt[t[e+12]]+Zt[t[e+13]]+Zt[t[e+14]]+Zt[t[e+15]]}(r)};var Yt=function(){return Xt()};function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==te(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===te(o)?o:String(o)),r)}var o}var re=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataLayerNames=e,this.dataLayerLog=[],this.asyncCommands=[],this.loaded=!1,this.dataLayers=[],this.dataLayerNames.forEach((function(t){var e,r,o=s()[t];F(o)&&(e=n.asyncCommands).push.apply(e,function(t){if(Array.isArray(t))return ee(t)}(r=o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return ee(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),_(t,n),n.dataLayers.push(o)}))}var e,n;return e=t,(n=[{key:"start",value:function(){this.loadAsyncCommands()}},{key:"pushLog",value:function(t){U(this.dataLayerLog,t)}},{key:"process",value:function(){}},{key:"push",value:function(t){this.loaded?this.process(t):this.asyncCommands.push(t)}},{key:"loadAsyncCommands",value:function(){for(;this.asyncCommands.length>0;)this.process(this.asyncCommands.shift());this.loaded=!0}}])&&ne(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ie(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ie(o)?o:String(o)),r)}var o}function ue(t,e,n){return e&&ce(t.prototype,e),n&&ce(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var fe=function(){function t(e,n){if(ae(this,t),!e)throw"Missing version definitions";this._versionedDefinitions=e,this._interfaceType=n}return ue(t,[{key:"getInterface",value:function(t,e){var n=this._versionedDefinitions[e];if(n)return n}}]),t}(),se=function(){function t(e){if(ae(this,t),!e)throw"Missing type definitions";this._typeVersionDefinitionMap=e}return ue(t,[{key:"getInterface",value:function(t,e,n){var r=this._typeVersionDefinitionMap[n];if(r)return r.getInterface(t,e)}}]),t}(),le={},pe=function(t){for(var e=function(){var t,e,o=(t=r[n],e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return oe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];if(F(a)){var c={};a.forEach((function(t){var e={};Object.keys(t).forEach((function(n){"type"!==n&&(e[n]=t[n])})),c[t.type]=new fe(e,t.type)})),le[i]=new se(c)}else le[i]=new fe(a)},n=0,r=Object.entries(t);n<r.length;n++)e()},ye="string",ve="OPTIONAL",de="REQUIRED",be="map";function he(){return he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Oe(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},he.apply(this,arguments)}function me(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ge(t,e)}function ge(t,e){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ge(t,e)}function we(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oe(t);if(e){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===Pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function Oe(t){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oe(t)}function je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Pe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Pe(o)?o:String(o)),r)}var o}function _e(t,e,n){return e&&Se(t.prototype,e),n&&Se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}var Ee=function(t,e,n){var r;if("CALCULATED"!==e._fieldType){var o=t[e.name];"sub"===e._resolutionType&&(o=t),r=e.parse(o)}var i=Pe(e.transformFn);if("undefined"!==i){var a=F(e.transformFn);if("function"===i||a)for(var c=a?e.transformFn:[e.transformFn],u=0;u<c.length;u++)r=c[u](r,n);else r=e.transformFn}return e._outputType&&e._outputType===ye&&(r=r.toString()),r},ke=function(){function t(e){je(this,t),this.name=e,this.properties=[],this.definitionType="",this._outputType,this._resolutionType=be,this._fieldType=ve,this.outputKey,this.allowedValuesList=[]}return _e(t,[{key:"parse",value:function(t){if(this.validate(t),this._fieldType!==ve||t){for(var e=new z,n=0;n<this.properties.length;n++){var r=this.properties[n],o=Ee(t,r,e.getProperties());r._resolutionType===be?e.set(r.outputKey||r.name,o):e.merge(o)}return e.getProperties()}}},{key:"validate",value:function(t){if(this._fieldType===de&&!t)throw"Missing required property '".concat(this.name,"'");if(this.allowedValuesList.length>0&&!this.allowedValuesList.includes(t))throw"Input '".concat(t,"' for property '").concat(this.name,"' is not one of the allowed values (").concat(this.allowedValuesList,").")}},{key:"optional",value:function(){return this._fieldType=ve,this}},{key:"required",value:function(){return this._fieldType=de,this}},{key:"load",value:function(){for(var t=0;t<this.properties.length;t++)this.properties[t].load()}},{key:"stringify",value:function(){for(var t=new z,e=0;e<this.properties.length;e++){var n=this.properties[e];t.merge(n.stringify())}return t.getProperties()}},{key:"clean",value:function(){for(var t=0;t<this.properties.length;t++)this.properties[t].clean();this.properties=[]}},{key:"transform",value:function(t){return this.transformFn=t,this}},{key:"transformKey",value:function(t){return this.outputKey=t,this}},{key:"allowedValues",value:function(t){return this.allowedValuesList=t,this}},{key:"outputType",value:function(t){return this._outputType=t,this}}]),t}(),Te=function(t){me(n,t);var e=we(n);function n(t,r){var o;return je(this,n),(o=e.call(this,t)).definitionType="Schema",o.properties=r,o}return _e(n,[{key:"parse",value:function(t){var e;if(this.properties&&this.properties.length>0)try{this.load(),e=he(Oe(n.prototype),"parse",this).call(this,t||{}),this.clean()}catch(t){throw""}return Object.freeze(e)}}]),n}(ke),Ce=function(t){me(n,t);var e=we(n);function n(t){return je(this,n),e.call(this,t)}return _e(n,[{key:"parse",value:function(t){return this.validate(t),t}},{key:"stringify",value:function(){var t={};return t[this.name]=this._fieldType,t}}]),n}(ke),xe=function(t){me(n,t);var e=we(n);function n(){var t;return je(this,n),(t=e.call(this)).objDefinitions=[],t.definitionType="Object",t}return _e(n,[{key:"load",value:function(){this.properties=this.properties.concat(this.objDefinitions),this.extraDefinitions&&(this.properties=this.properties.concat(this.extraDefinitions)),he(Oe(n.prototype),"load",this).call(this)}},{key:"stringify",value:function(){if(this._resolutionType===be){var t={};return t["".concat(this.name," (").concat(this._fieldType,")")]=he(Oe(n.prototype),"stringify",this).call(this),t}return he(Oe(n.prototype),"stringify",this).call(this)}},{key:"substitute",value:function(t){return this.objDefinitions=t,this._resolutionType="sub",this}},{key:"map",value:function(t,e){return this.name=t,this.objDefinitions=e,this._resolutionType=be,this}},{key:"extend",value:function(t){return this.extraDefinitions=t,this}}]),n}(ke),Re=function(t){me(n,t);var e=we(n);function n(){var t;return je(this,n),(t=e.call(this)).definitionType="Collection",t.minElements=0,t}return _e(n,[{key:"parse",value:function(t){if(void 0!==t&&!F(t))throw"";if(this.minElements&&(!t||t.length<this.minElements))throw"";var e=[];if(t)for(var r=0;r<t.length;r++)e.push(he(Oe(n.prototype),"parse",this).call(this,t[r]));return e}},{key:"stringify",value:function(){if(this._resolutionType===be){var t={};t["".concat(this.minElements,"...n")]=he(Oe(n.prototype),"stringify",this).call(this)["".concat(this.name," (").concat(this._fieldType,")")];var e={};return e["".concat(this.name," (").concat(this._fieldType,")")]=t,e}return he(Oe(n.prototype),"stringify",this).call(this)}},{key:"withMinElements",value:function(t){return this.minElements=t,this._fieldType=t>0?de:ve,this}}]),n}(xe);function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Le(t){return function(t){if(Array.isArray(t))return De(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return De(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ie(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ie(o)?o:String(o)),r)}var o}function Me(){return Me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qe(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Me.apply(this,arguments)}function Be(t,e){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Be(t,e)}function qe(t){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qe(t)}var Fe=["_expDataLayer","_signalsDataLayer"],Ue=["add_virtual_page_view","set_config","subscribe"],Ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Be(t,e)}(c,t);var e,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=qe(o);if(i){var n=qe(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(t){var e,n=t.pageViewSchema,r=t.autoPageViewDisabled,o=t.beforeEvent,i=t.immediateSchemas,u=void 0===i?[]:i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,Fe)).pageViewSchema=n,e.autoPageViewDisabled=r,e.beforeEvent=o,e.immediateSchemas=[Ue].concat(Le(u)),e._initEvents(),e}return e=c,(r=[{key:"push",value:function(t){return this.immediateSchemas.includes(t.schema)?this.process(t):Me(qe(c.prototype),"push",this).call(this,t)}},{key:"_initEvents",value:function(){for(var t=!this.autoPageViewDisabled,e=this.asyncCommands.length-1;e>=0;e--){var n=this.asyncCommands[e];n.schema!==this.pageViewSchema||n.data&&n.data.virtual_path||(t=!1),"set_config"===n.schema&&this.process.apply(this,Le(this.asyncCommands.splice(e,1)))}t&&this.process({schema:this.pageViewSchema})}},{key:"process",value:function(t){Me(qe(c.prototype),"pushLog",this).call(this,t);try{var e=t.data,r=t.schema||t.interface,o=t.type,i=t.version||"v1",a={eventId:Yt()};this.beforeEvent&&this.beforeEvent(),function(){for(;Kt<Dt.length;){var t=Dt[Kt];T(t,(function(t,e){-1===Ut.indexOf(t.toLowerCase())&&Gt(t)&&(zt(t,e),Nt[t]=e)})),Kt++}}(),function(t,e,n,r,o){var i=function(t,e,n){var r=le[t];if(r)return r.getInterface(t,n,e)}(t,e,n),a=new Te(t,i.properties).parse(r)||{},c=new i.handler(a,e,n,o);c.preProcess(a),c.process(a)}(r,o,i,e,a)}catch(e){var u=["Unable to process",t,"\n\n"];g.apply(n,u.concat(e))}}}])&&Ae(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(re);function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function Ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ne(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ne(o)?o:String(o)),r)}var o}function Ge(){return Ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=We(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ge.apply(this,arguments)}function ze(t,e){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ze(t,e)}function We(t){return We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},We(t)}var $e=["_trfq"],He=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=We(r);if(o){var n=We(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ne(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,$e)).handlers=t,e.start(),e}return e=a,(n=[{key:"process",value:function(t){Ge(We(a.prototype),"pushLog",this).call(this,t);try{var e=Array.prototype.slice.call(t,1),n=t[0];this.handlers[n]?this.handlers[n].apply(null,e):g("Invalid command sent to data layer",this.dataLayerName,t)}catch(e){g("Unable to process",t,e)}}}])&&Ke(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(re);const Qe=new z;var Je,Ze,Xe,Ye=function(t,e,n,r){var o=pt("cookie","sameSite")||"",i=new Date;i.setTime(i.getTime()+60*n*1e3),l().cookie="".concat(t,"=").concat(encodeURI(e),"; domain=").concat(v(),"; ")+(n?"expires=".concat(i.toGMTString(),"; "):"")+(r?"path=".concat(r,"; "):"")+(o?"SameSite=".concat(o,"; "):"")+("NONE"===o.toUpperCase()?" Secure;":"")},tn=function(t){var e=l().cookie;return Ze!==e&&(Xe=function(t){for(var e=t.split(";"),n=Object.create(null),r=0;r<e.length;r++){var o=/([^=]*)*=([\s\S]*)/.exec(e[r]);if(o&&o[2]){var i=o[1].trim(),a=decodeURIComponent(o[2].trim());n[i]=a}}return n}(e),Ze=e),Xe[t]},en=function(t){var e=tn(t);return I(e,"&","=")},nn=function(){var t,e=l().querySelector("meta[name='gd:traceId']");return e&&(t=e.getAttribute("content")),t&&!It.get("tcc.disablePageTracing")?{trace_id:t,traced:1}:{trace_id:Yt().replace(/-/g,"")}};function rn(t){return rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rn(t)}function on(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return an(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function un(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cn(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=sn(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sn(r.key),r)}}function sn(t){var e=function(t,e){if("object"!==rn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===rn(e)?e:String(e)}var ln=function(){function t(e){var n=e.contextFnMap,r=e.paramsFnMap,o=void 0===r?{}:r,i=e.windowName;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._contextFnMap=n,this._paramsFnMap=o,this._windowName=i}var e,n;return e=t,(n=[{key:"init",value:function(t){var e=t.context,n=void 0===e?{}:e,r=t.contextFnMap,o=void 0===r?{}:r,i=t.paramsFnMap,a=void 0===i?{}:i;this.version=0,this.context=n,this._initialContext=un({},n),this._contextMap={},this._contextFnMap=C(this._contextFnMap,o),this._paramsFnMap=C(this._paramsFnMap,a)}},{key:"_buildContext",value:function(t){var e=un({},this._initialContext);return Object.entries(t).forEach((function(t){var n,r=on(t,2),o=r[0],i=r[1],a=o.split("."),c=e;a.forEach((function(t,e){e<a.length-1?(c[t]=c[t]||{},c=c[t]):n=t})),c[n]=i})),e}},{key:"updateContext",value:function(){var t=this;if(this._contextFnMap){var e=!1,n={},r={};Object.entries(this._paramsFnMap).forEach((function(t){var e=on(t,2),n=e[0],o=e[1];try{r[n]=o()}catch(t){g("Error executing paramsFnMap for key: ".concat(n),t)}})),Object.entries(this._contextFnMap).forEach((function(o){var i=on(o,2),a=i[0],c=(0,i[1])(r);t._contextMap[a]!==c&&(e=!0),void 0!==c&&(n[a]=c)})),e&&(this.version++,this.context=D(this._buildContext(n)),this._contextMap=n,this._windowName&&S(this._windowName,this.context))}}}])&&fn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const pn=new ln({});var yn={"godaddy.com":1,"mediatemple.net":4500,"afternic.com":497036},vn=[function(){return Mt("site","privateLabelId")},function(){return function(t,e,n){for(var r=dt(n),o=r.length-1;o>=0;o--){var i=r[o].split("=");if(e){if((i[0]+"").toLowerCase()===(t+"").toLowerCase())return i[1]}else if(i[0]===t)return i[1]}}("plid")},function(){var t=v().replace("dev-","").replace("test-","").replace("stg-","");if(yn.hasOwnProperty(t))return yn[t]}],dn=function(){for(var t=0;t<vn.length;t++){var e=vn[t]();if(e&&/^-?\d+$/.test(e))return B(e)}};function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==bn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===bn(o)?o:String(o)),r)}var o}function mn(){return mn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},mn.apply(this,arguments)}function gn(t,e){return gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gn(t,e)}function wn(t){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wn(t)}var On={"client.userAgent":function(){return p().userAgent},"client.sdk.name":function(){return Mt("client","name")},"client.sdk.version":function(){return Mt("client","version")},"client.device.viewportWidth":function(t){var e=t.win,n=t.doc;return B(e.innerWidth?e.innerWidth:n.body.offsetWidth)},"client.device.viewportHeight":function(t){var e=t.win,n=t.doc;return B(e.innerHeight?e.innerHeight:n.body.offsetHeight)},"client.device.screenResolutionWidth":function(t){var e=t.win;return B(e.screen.width)},"client.device.screenResolutionHeight":function(t){var e=t.win;return B(e.screen.height)},"page.id":function(){return Mt("page","id")},"page.traceId":function(){return Qe.get("trace_id")},"page.contentGroup":function(){return function(){var t=Mt("page","contentGroup");if("string"!=typeof t)return t;for(var e=t.split("/"),n=e.length-1;n>=0;n--)e[n]=e[n].trim(),e[n]||e.splice(n,1);if(e.length>0)for(;e.length<3;)e.push("Other");return e.join(" / ")}()},"page.host":function(){return y()},"page.path":function(t){return t.win.location.pathname},"page.virtualPath":function(){return Qe.get("virtual_path")},"page.location":function(){return n=(t=dt()).length?(function(t){for(var e=0;e<t.length;e++){var n=t[e].split("="),r=!1,o=n[1];o!==decodeURIComponent(n[1])&&(o=decodeURIComponent(n[1]),r=!0);var i=vt(o);r&&(i=encodeURIComponent(i)),t[e]="".concat(n[0],"=").concat(i)}}(t),"?"+t.join("&")):"",(r=s().location)&&(e="".concat(r.protocol,"//").concat(r.hostname).concat(r.pathname)),n&&(e="".concat(e).concat(n)),e;var t,e,n,r},"page.referrer":function(t){return t.doc.referrer},"site.privateLabelId":function(){return dn()}},jn={win:s,doc:l};const Sn=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wn(r);if(o){var n=wn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"init",value:function(t){var e=t.traceId,n=t.contextFnMap,r=t.paramsFnMap;mn(wn(a.prototype),"init",this).call(this,{context:{traceId:e},contextFnMap:n,paramsFnMap:r})}}])&&hn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(ln))({contextFnMap:On,paramsFnMap:jn,windowName:"globalContext"});var _n=["events"];function Pn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var En={},kn=["routing","webContext"],Tn=function(t,e,n){var r=e.callback;try{r(n)}catch(e){g("Failed to push datalayer event to subscriber (".concat(t,") callback"),e)}},Cn=function(t,e,n){var r=e.schemaIds,o=function(t,e){e.events;var n=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(e,_n),r=t.fields||[];return kn.forEach((function(t){r.includes(t)||delete n[t]})),n}(e,n);e.batch?(o.events=r?n.events.filter((function(t){return r.includes(t.schemaId)})):n.events,o.events.length>0&&Tn(t,e,o)):n.events.forEach((function(n){r&&!r.includes(n.schemaId)||Tn(t,e,C(o,{event:n}))}))},xn=[];function Rn(t){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn(t)}function In(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Rn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Rn(o)?o:String(o)),r)}var o}var Ln=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input=e,this.interfaceType=n,this.interfaceVersion=r,this.internal=o}var e,n;return e=t,(n=[{key:"preProcess",value:function(t){}},{key:"process",value:function(t){}}])&&In(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function An(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Dn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Dn(o)?o:String(o)),r)}var o}function Mn(t,e){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mn(t,e)}function Bn(t){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bn(t)}var qn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Bn(r);if(o){var n=Bn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"process",value:function(t){this._pushToQueue(t)}},{key:"_pushToQueue",value:function(t){if(!this.internal.hasFired){var e=this._getEvents(t);if(e&&0!==e.length){for(var n=q(),r=0;r<e.length;r++)e[r].data=C({eventCreationTimestamp:n},e[r].data);var o=this._getGlobalSchemaId(),i=this._getBusinessContext();Sn.updateContext(),pn.updateContext(),a={schemaId:o,global:Sn.context,businessContext:i,events:e,webContext:C(pn.context,this._getWebContext(t)),routing:{eventBusApiKey:this._getApiKey(),globalContextVersion:Sn.version,hasConversion:this._hasConversion()}},D(a),xn.push(a),function(t){for(var e=0,n=Object.entries(En);e<n.length;e++){var r=(c=2,function(t){if(Array.isArray(t))return t}(a=n[e])||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,f=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){f=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(f)throw o}}return c}}(a,c)||function(t,e){if(t){if("string"==typeof t)return Pn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(t,e):void 0}}(a,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];try{Cn(o,i,t)}catch(t){g("Failed to push datalayer event batch to subscriber (".concat(o,")"),t)}}var a,c}(a),xn.length>2e3&&xn.shift(),this.internal.hasFired=!0}}var a}},{key:"_getSchemaId",value:function(){}},{key:"_getEvents",value:function(t){return[{schemaId:this._getSchemaId(),data:t}]}},{key:"_getGlobalSchemaId",value:function(){return dn()?"urn:shared:user:events:/v2":"urn:shared:user:events:/v1"}},{key:"_getBusinessContext",value:function(){}},{key:"_getApiKey",value:function(){return Mt("eventBus","sccApiKey")}},{key:"_hasConversion",value:function(){}},{key:"_getWebContext",value:function(t){}}])&&An(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ln);function Fn(t){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fn(t)}function Un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Fn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Fn(o)?o:String(o)),r)}var o}function Vn(t,e){return Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vn(t,e)}function Nn(t){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nn(t)}const Kn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Nn(r);if(o){var n=Nn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Fn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getBusinessContext",value:function(){return this.input.businessContext}},{key:"_getEvents",value:function(){return this.input.events}},{key:"_getApiKey",value:function(){return this.input.apiKey}},{key:"_getGlobalSchemaId",value:function(){return this.input.schemaId}}])&&Un(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(qn);var Gn="urn:shared:user:event:/data-platform/signals/click/v1",zn="urn:shared:user:event:/data-platform/signals/impression/v1",Wn="urn:shared:user:event:/data-platform/signals/element-action/v1",$n="urn:shared:user:event:/data-platform/signals/traffic-event/v1",Hn="urn:shared:user:event:/data-platform/signals/page-view/v1",Qn="urn:shared:user:event:/data-platform/signals/ecommerce/add-to-cart/v1",Jn="urn:shared:user:event:/data-platform/signals/ecommerce/checkout-progress/v1",Zn="urn:shared:user:event:/data-platform/signals/ecommerce/remove-from-cart/v1",Xn="urn:shared:user:event:/data-platform/signals/ecommerce/transaction/v2",Yn="urn:shared:user:event:/data-platform/signals/experiment-assignment/v1",tr="urn:shared:user:event:/rigor/page-navigation/v1",er="urn:shared:user:event:/rigor/page-navigation-delayed/v1",nr="urn:shared:user:event:/data-platform/signals/conversion/v1",rr=/[^a-z0-9\_\/\.\-]/g,or=/^([a-z0-9_\-]+)\.([a-z0-9_\-]+)\.(([a-z0-9_\/\-]+)\.)?([a-z0-9_\/\-]+)\.([a-z0-9_\-]+)\.([a-z0-9_\-]+)$/g,ir=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.eid,n=t.customProperties,r=t.eventCategory;return C({pageLevelProperties:C(Nt),identityRealm:Mt("identity","realm")},e&&{eid:e},n&&{customProperties:n},r&&{eventCategory:r})},ar=function(t,e,n,r){var o={traffic:ir({eid:e,customProperties:r}),producerEventId:t};if(e){var i=function(t){return t.split(".")}(e),a=function(t){return t[t.length-1]}(i);(function(t){return!!(t.match(or)&&t.length<=500)})(e)&&function(t,e,n){return e===n&&t.length>=5&&t.length<=6}(i,a,n)&&(o.element=function(t,e){var n=6===t.length?1:0,r={area:t[0],product:t[1],section:t[2+n],widget:t[3+n]};return["impression","click"].includes(e)||(r.action=e),r}(i,a))}return o},cr=function(t,e,n,r){null!=r&&null!=n&&0!==r&&0!==n&&n>r&&(t[e]=Math.round(n-r))},ur=function(t,e,n,r){var o=X(e);!function(t,e){cr(t,"pageLoadTime",e.loadEventStart,e.navigationStart),cr(t,"domContentLoadedTime",e.domContentLoadedEventStart,e.navigationStart),cr(t,"domInteractiveTime",e.domInteractive,e.navigationStart),cr(t,"pageDownloadTime",e.responseEnd,e.responseStart),cr(t,"domainLookupTime",e.domainLookupEnd,e.domainLookupStart),cr(t,"serverResponseTime",e.responseStart,e.requestStart),cr(t,"serverConnectionTime",e.connectEnd,e.connectStart),cr(t,"redirectionTime",e.fetchStart,e.navigationStart)}(o,e);var i={navigationType:e.navigationType,timing:{navigation:o},traffic:ir({customProperties:n}),producerEventId:t,contentLoadType:r};return"hard"===r&&(i.response=Y(e),i.timing.marks=e.marks,i.timing.measures=e.measures,i.timing.paint={firstPaint:e.fp,firstContentfulPaint:e.fcp,largestContentfulPaint:e.lcp}),i},fr=function(t,e){return{timing:{paint:{largestContentfulPaint:e.LCP},vitals:{cumulativeLayoutShift:e.CLS,firstInputDelay:e.FID,timeToInteractive:e.timeToInteractive}},traffic:ir(),producerEventId:t}};function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==sr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===sr(o)?o:String(o)),r)}var o}function pr(t,e){return pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pr(t,e)}function yr(t){return yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yr(t)}const vr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yr(r);if(o){var n=yr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===sr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,n=[{key:"_getSchemaId",value:function(){return Wn}},{key:"_getActionType",value:function(t){return t.element.action}},{key:"_getEvents",value:function(t,e){var n=t.traffic||{};return n.eid=this._buildLegacyEid(this._getActionType(t),t.element,n.eid),[{schemaId:this._getSchemaId(),data:C(t,{producerEventId:e||this.internal.eventId,element:t.element,traffic:ir(n)})}]}},{key:"_buildLegacyEid",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]?arguments[2]:"".concat(e.area,".").concat(e.product,".").concat(e.section,".").concat(e.widget,".").concat(t)}},{key:"_transformLegacyPromo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.eid,o=n.customProperties,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{id:i.id,name:i.name,creative_name:i.creative,creative_slot:i.position,type:t,properties:o,eid:this._buildLegacyEid(t,e,r)}}},{key:"_isPromo",value:function(t){return t.promotion&&Object.keys(t.promotion).length>0}}],n&&lr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(qn);function dr(t){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dr(t)}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==dr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===dr(o)?o:String(o)),r)}var o}function hr(t,e){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hr(t,e)}function mr(t){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mr(t)}const gr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mr(r);if(o){var n=mr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===dr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getSchemaId",value:function(){return Gn}},{key:"_getActionType",value:function(){return"click"}}])&&br(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(vr);function wr(t){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wr(t)}function Or(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==wr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==wr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===wr(o)?o:String(o)),r)}var o}function Sr(){return Sr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Sr.apply(this,arguments)}function _r(t,e){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_r(t,e)}function Pr(t){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pr(t)}const Er=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_r(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pr(r);if(o){var n=Pr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===wr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getSchemaId",value:function(){return zn}},{key:"_getActionType",value:function(){return"impression"}},{key:"_getEvents",value:function(t){var e=this,n=[];return t.impressions.forEach((function(t){var r;n.push.apply(n,function(t){if(Array.isArray(t))return Or(t)}(r=Sr(Pr(a.prototype),"_getEvents",e).call(e,t,Yt()))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return Or(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),n}}])&&jr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(vr);function kr(t){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kr(t)}function Tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==kr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==kr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===kr(o)?o:String(o)),r)}var o}function Cr(t,e){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cr(t,e)}function xr(t){return xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xr(t)}var Rr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=xr(r);if(o){var n=xr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===kr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"process",value:function(t){x(t.config),T(t.config,(function(e,n){if(!t.overwrite){var r=It.get(e);F(r)?n=[].concat(r,n):"object"===kr(r)&&(n=C(r,n))}It.set(e,n)}))}}])&&Tr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ln);function Ir(t){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function Lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ir(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ir(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ir(o)?o:String(o)),r)}var o}function Dr(t,e){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Dr(t,e)}function Ar(t){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ar(t)}var Mr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ar(r);if(o){var n=Ar(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"process",value:function(t){var e,n,r;e=t.name,n={callback:t.callback,schemaIds:t.schemaIds,batch:t.batch,fields:t.fields},(r=[].concat(xn)).length>=2e3&&w("".concat(e," subscribed to SCC after the eventQueue was full. Some events may have been lost.")),r.forEach((function(t){return Cn(e,n,t)})),En[e]=n}}])&&Lr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ln);function Br(t){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Br(t)}function qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Br(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Br(o)?o:String(o)),r)}var o}function Fr(){return Fr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Fr.apply(this,arguments)}function Ur(t,e){return Ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ur(t,e)}function Vr(t){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vr(t)}var Nr,Kr,Gr=function(t){var e={};if(F(t))for(var n=0;n<t.length;n++){var r=t[n];F(r)&&(e[r[0]]=R(r))}return e},zr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ur(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vr(r);if(o){var n=Vr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Br(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"setTDataString",value:function(t){Fr(Vr(a.prototype),"merge",this).call(this,function(t){return I(t,"^",",")}(t))}},{key:"stringify",value:function(){var t,e=x(this.getProperties());(t=e)&&T(t,(function(e,n){var r=(e+"").split(".").join("_");delete t[e],t[r]=n}));var n=L(e,"^",",");if(n)return n}},{key:"set",value:function(t,e){"object"!==Br(e)&&"[object Function]"!=={}.toString.call(e)?Fr(Vr(a.prototype),"set",this).call(this,t,e):g("Invalid key/value pair found in Traffic's custom properties (tData). Objects, arrays, and functions are not supported.\n\nKey: '".concat(t,"' Value: '").concat(e,"' Type: '").concat(Br(e),"'."))}}])&&qr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(z),Wr=function(t){var e=new zr;return e.merge(t.custom_properties),t.traffic&&e.merge(t.traffic.customProperties),e},$r=function(t){var e=t.traffic;return e&&function(t,e){var n=t.eid||e&&e();if(!n)throw"";if(t.eid=n.toLowerCase(),function(t){return t.match(rr)}(t.eid))throw t.eid,""}(e),t},Hr=function(){return Math.floor(2147483647*Math.random())};function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function Jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Qr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Qr(o)?o:String(o)),r)}var o}function Zr(t,e){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zr(t,e)}function Xr(t){return Xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xr(t)}var Yr=0,to=function(){var t=It.get("components");if(Kr!==t)return Kr=t},eo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Xr(r);if(o){var n=Xr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Qr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getWebContext",value:function(){return{pageViewCount:Yr}}},{key:"_getEvents",value:function(t){var e=Wr(t);return[{schemaId:Hn,data:{forensics:{traceIdAdopted:M(Qe.get("traced")),components:to()},traffic:ir({customProperties:e.getProperties()}),producerEventId:this.internal.eventId}}]}},{key:"preProcess",value:function(t){var e=t.path||t.virtual_path||t.virtualPath,n=void 0!==e;if(n||(e=s().location.pathname),Nr===e)throw"cmd: LogPageRequest duplicate page request detected, ignoring duplicate path";Nr=e,Qe.set("corrid",Hr()),n&&(Wt(),Qe.set("virtual_path",e)),Je.incrementPageCount(),Yr+=1,Qe.get("trace_id")||Qe.merge(nn())}}])&&Jr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(qn),no=function(t){return[(new xe).map("element",[new Ce("area").required(),new Ce("product").required(),new Ce("section").required(),new Ce("widget").required()]).required().extend(t)]},ro=function(t){return[(new xe).map("traffic",[new Ce("customProperties")]).extend(t)]},oo=function(){return[(new xe).substitute(ro([new Ce("eid")]))]},io=function(){return[(new xe).substitute(no()),(new xe).substitute(oo()),(new xe).map("promotion",[new Ce("id").required(),new Ce("name"),new Ce("creative"),new Ce("position")]),(new xe).map("product",[new Ce("actionCode").required().allowedValues(["add_to_cart","product_detail"]),(new xe).map("basket",[new Ce("couponCode"),new Ce("currencyCode"),new Ce("itemTrackingCode")]),(new Re).map("products",[new Ce("productId").required(),new Ce("productName"),new Ce("productInstanceId"),new Ce("priceUsd"),new Ce("quantity").required(),new Ce("couponCode"),new Ce("itemTrackingCode")]).required(),(new Re).map("packages",[new Ce("id"),new Ce("priceUsd"),new Ce("quantity"),new Ce("category")])])]};const ao={add_click:{v1:{handler:gr,properties:[(new xe).substitute(io()).transform($r)]}},add_element_action:{v1:{handler:vr,properties:[(new xe).substitute([(new xe).substitute(no([new Ce("action").required().allowedValues(["blur","drag","focus","hover","load","scroll"])])),(new xe).substitute(oo())]).transform($r)]}},add_impressions:{v1:{handler:Er,properties:[(new Re).map("impressions",[(new xe).substitute(io()).transform($r)]).withMinElements(1)]}},add_virtual_page_view:{v1:{handler:eo,properties:[new Ce("virtualPath").required(),(new xe).substitute(ro())]}},add_micro_events:{v1:{handler:Kn,properties:[new Ce("apiKey").required(),new Ce("schemaId").required(),(new Re).map("events",[new Ce("schemaId").required(),new Ce("data").required()]).withMinElements(1),(new xe).map("businessContext",[new Ce("schemaId").required(),new Ce("data").required()])]}},subscribe:{v1:{handler:Mr,properties:[new Ce("name").required(),new Ce("callback").required(),new Ce("schemaIds"),new Ce("fields"),new Ce("batch")]}},set_config:{v1:{handler:Rr,properties:[(new xe).map("config",[(new Re).map("components",[new Ce("name").required(),new Ce("version").required().outputType(ye)]),(new xe).map("cookie",[new Ce("sameSite")]),(new xe).map("page",[new Ce("spa"),new Ce("id"),new Ce("contentGroup"),new Ce("referrerExclusion")]),(new xe).map("identity",[new Ce("realm")]),(new xe).map("site",[new Ce("privateLabelId")]),(new xe).map("timing",[new Ce("auto")])]).required(),new Ce("overwrite")]}}};function co(t){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},co(t)}function uo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?uo(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=function(t){var e=function(t,e){if("object"!==co(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==co(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===co(e)?e:String(e)}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var so=!1,lo=function(t){var e=t.trfqMethods,n=t.legacyName,r=t.dataLayerConfig,o=t.globalContextConfig,i=t.hooks,a=i.onLoad,c=i.beforeLoad,u=i.beforeEvent,f=i.getEnvironment;if(!so){so=!0,Bt("build","env",f&&f()||Mt("build","env")),Qe.merge(nn()),Sn.init(fo({traceId:Qe.get("trace_id")},o)),pe(ao),function(){var t=s();if(t.PerformanceObserver){var e=new t.PerformanceObserver((function(t){var e=t.getEntries(),n=e[e.length-1];n.renderTime&&($.lcp=Math.round(n.startTime))}));try{e.observe({type:"largest-contentful-paint",buffered:!0})}catch(t){}}}();var p=new ct("complete"===l().readyState,(function(t){s().addEventListener("load",t)}));Je.getSession(),c&&c();var y=new Ve(fo({autoPageViewDisabled:It.get("".concat(n,".manualPageRequest")),beforeEvent:u},r));p.registerOnLoadFn((function(){a&&a(),y.start(),new He(e),Mt("timing","auto")&&function(t,e,n){if(!rt)if(rt=!0,nt())et(t,tt(t,e),n);else var r=setInterval((function(){nt()&&(clearInterval(r),et(t,tt(t,e),n))}),250)}(n,"auto"),Mt("eventBus","enabled")&&(S(_t,[]),St=new jt(Pt),s()._signalsDataLayer=s()._signalsDataLayer||[],s()._signalsDataLayer.push({schema:"subscribe",data:{name:"scc-plugin-sink-event-bus",batch:!0,fields:["routing"],callback:function(t){var e=t.schemaId,n=t.global,r=t.businessContext,o=t.events,i=t.routing,a=i.eventBusApiKey,c=i.hasConversion,u=i.globalContextVersion;St.pushEvent({apiKey:a,businessContext:r,contextVersion:u,schemaId:e,global:n,events:o},c)}}}))})),m("SCC STARTED",It.getProperties())}};function po(t){return po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(t)}function yo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vo(r.key),r)}}function vo(t){var e=function(t,e){if("object"!==po(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==po(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===po(e)?e:String(e)}function bo(t){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(t)}function ho(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oo(r.key),r)}}function mo(t,e){return mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mo(t,e)}function go(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wo(t){return wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wo(t)}function Oo(t){var e=function(t,e){if("object"!==bo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==bo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===bo(e)?e:String(e)}var jo="_tccl_visitor",So="_tccl_visit",_o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mo(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wo(r);if(o){var n=wo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return go(t)}(this,t)});function a(){var t,e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return e=go(t=i.call.apply(i,[this].concat(c))),r="_scc_session",(n=Oo(n="_sessionCookieName"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=a,(n=[{key:"getSession",value:function(){var t=tn(jo),e=tn(So);t||e?(t||(t=Yt()),e||(e=Yt())):t=e=Yt(),Ye(jo,t,525600,"/"),Ye(So,e,30,"/");var n=en(this._sessionCookieName);return{visitorGuid:t,visitGuid:e,pageCount:B(n.pc)||0}}}])&&ho(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=void 0,(n=vo(n="_sessionCookieName"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}var e,n;return e=t,(n=[{key:"getSession",value:function(){}},{key:"saveSessionCookie",value:function(t){var e=L(t,"&","=");Ye(this._sessionCookieName,e,20,"/")}},{key:"incrementPageCount",value:function(){var t=en(this._sessionCookieName),e=B(t.pc)||0;t.pc=e+1,t.C_TOUCH=q(),this.saveSessionCookie(t)}}])&&yo(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}());function Po(t){return Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Po(t)}function Eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Po(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Po(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Po(o)?o:String(o)),r)}var o}function ko(t,e){return ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ko(t,e)}function To(t){return To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},To(t)}var Co=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ko(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=To(r);if(o){var n=To(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Po(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getEvents",value:function(t){var e=t.eid,n=t.type.toLowerCase(),r=function(t){return"click"===t?Gn:"impression"===t?zn:["blur","drag","focus","hover","load","scroll"].includes(t)?Wn:$n}(n),o=Wr(t).getProperties();return[{schemaId:r,data:r!==$n?ar(this.internal.eventId,e,n,o):{traffic:ir({customProperties:o,eid:e,eventCategory:n}),producerEventId:this.internal.eventId}}]}}])&&Eo(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(qn);function xo(t){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(t)}function Ro(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==xo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==xo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===xo(o)?o:String(o)),r)}var o}function Io(t,e){return Io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Io(t,e)}function Lo(t){return Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lo(t)}var Do=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Io(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Lo(r);if(o){var n=Lo(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"_getApiKey",value:function(){return pt("eventBus","rigorApiKey")}},{key:"_getEvents",value:function(t){var e=t.is_hard_navigation?"hard":"soft",n=t.timing_object;if(n){if(n.navigationStart)return[{schemaId:tr,data:ur(this.internal.eventId,n,t.custom_properties,e)}];if(n.timeToInteractive)return[{schemaId:er,data:fr(this.internal.eventId,n)}]}}}])&&Ro(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(qn),Ao=function(){return[new Ce("custom_properties").optional()]};const Mo={add_event:{v1:{handler:Co,properties:[new Ce("type").required(),(new xe).substitute([new Ce("eid").optional()]),(new xe).substitute(Ao())]}},add_page_view:{v1:{handler:eo,properties:[new Ce("path").optional(),(new xe).substitute(Ao())]}},add_perf:{v1:{handler:Do,properties:[new Ce("timing_object").required(),new Ce("is_hard_navigation").optional(),(new xe).substitute(Ao())]}}},Bo=function(t,e,n){s()._expDataLayer.push({schema:"add_event",version:"v1",data:{type:t,eid:e,custom_properties:Gr(n)}})},qo=function(t,e){s()._expDataLayer.push({schema:"add_perf",version:"v1",data:{timing_object:t,custom_properties:Gr(e)}})};var Fo="traffic.tcc.instrumentation.navigation.timing",Uo="click",Vo="impression",No=function(t,e){var n=e.data,r=n.traffic.eid,o=n.element,i=void 0===o?{}:o,a=i.area,c=i.product,u=i.section,f=i.widget;return null!=r?r:"".concat(a,".").concat(c,".").concat(u,".").concat(f,".").concat(t)},Ko=function(t){var e=t.data,n=e.element,r=e.traffic.eid;return n?n.action:r.split(".").pop()},Go=function(t){var e,n;switch(t.schemaId){case Xn:return function(t,e,n){var r=n.newCustomerFlag,o=n.newVsRenewal;t=t||"modular-cart";var i=e?"payment-pending_":"payment-processed_";return"ecomm.payments.transaction.".concat(r?"new-customer_":"existing-customer_").concat(i).concat(o,".").concat(t,".success")}(null===(e=t.data.cart)||void 0===e?void 0:e.type,null===(n=t.data.payment)||void 0===n?void 0:n.pendingFlag,t.data.order);case Qn:return"gpd.exp.tcc.add-to-cart.success";case Zn:return"gpd.exp.tcc.remove-from-cart.success";case Jn:return 1===t.data.checkout.step?"gpd.exp.tcc.begin-checkout.success":"gpd.exp.tcc.checkout-progress.success";case Yn:return"traffic.tcc.instrumentation.experiment.add_experiment";case nr:return"".concat("tcc.conversion.").concat(t.data.conversion.area,".").concat(t.data.conversion.product,".").concat(t.data.conversion.revenue,".").concat(t.data.conversion.action);case $n:return t.data.traffic.eid;case Wn:return No(Ko(t),t);case Gn:return No(Uo,t);case zn:return No(Vo,t);case tr:case er:return Fo}},zo=function(t){switch(t.schemaId){case tr:case er:return"pageperf";case $n:return t.data.traffic.eventCategory;case nr:return"genConv";case Xn:case Qn:case Zn:case Jn:return"ecommerce";case Yn:return"experiment";case Wn:return Ko(t);case Gn:return Uo;case zn:return Vo}},Wo="perf",$o="pageevent",Ho=function(t){var e=t.schemaId,n=t.data;switch(e){case Hn:return"pageview";case tr:case er:return Wo;case $n:return n.traffic.eid===Fo?Wo:$o;default:return $o}};function Qo(t){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qo(t)}var Jo,Zo="_trfqSendLog",Xo=[Hn,Gn,zn,$n,Wn,er,tr],Yo=function(t){var e=t.events,n=t.global,r=t.webContext,o=function(t){var e,n,r=t.traceId,o=t.context,i=t.client,a=t.page;return{dh:a.host,dr:(n=a.referrer,void 0!==n?n.substring(0,1e3):void 0),ua:i.userAgent,client_name:i.sdk.name,cv:i.sdk.version,vg:o.sessionId,vtg:o.visitorId,dp:(e=a.path,e?(/\/$/.test(e)&&(e=e.substring(0,e.length-1)),"/"!==e[0]&&(e="/".concat(e)),e):"notspecified"),trace_id:r}}(n);e.forEach((function(t){var e=t.schemaId,i=t.data,a=C(o,function(t){var e=t.schemaId,n=t.webContext,r=t.data,o=r.eventCreationTimestamp,i=r.producerEventId,a=r.traffic,c=a.customProperties,u=a.pageLevelProperties,f=void 0===u?{}:u,s=new zr(c),l=new z({cts:o,hit_id:i,ea:zo(t),ht:Ho(t),eid:Go(t),trfd:JSON.stringify(f),usrin:s.stringify(),ap:f.ap?f.ap:"not_set",vci:n.pageCorrelationId,z:Hr()});return e!==tr&&e!==er||function(t,e){var n=e.schemaId,r=e.data,o=r.navigationType,i=r.contentLoadType,a=r.timing,c=a.navigation,u=a.vitals,f=void 0===u?{}:u,s=a.paint,l=void 0===s?{}:s;n===tr?t.merge({tce:c.connectEnd,tcs:c.connectStart,tdc:c.domComplete,tdclee:c.domContentLoadedEventEnd,tdcles:c.domContentLoadedEventStart,tdi:c.domInteractive,tdl:c.domLoading,tdle:c.domainLookupEnd,tdls:c.domainLookupStart,tfs:c.fetchStart,tns:c.navigationStart,trqs:c.requestStart,tre:c.responseEnd,trps:c.responseStart,tles:c.loadEventStart,tlee:c.loadEventEnd,nt:o,LCP:l.largestContentfulPaint}):n===er&&(i="hard",t.merge({LCP:l.largestContentfulPaint,CLS:f.cumulativeLayoutShift,FID:f.firstInputDelay,timeToInteractive:f.timeToInteractive})),t.set("nav_type",i)}(l,t),l.getProperties()}({schemaId:e,data:i,webContext:r,global:n}));!function(t,e){var n,r,o=bt("events.api")+e,i=(r={},T(t,(function(t,e){void 0!==e&&"object"!==Qo(e)&&"[object Function]"!=={}.toString.call(e)&&(r[t]=e)})),n={},T(r,(function(t,e){void 0!==e&&(n[t]=encodeURIComponent(e))})),n),a=function(t,e){var n=-1===e.indexOf("?")?"?":"&",r=L(t,"&","=");return"".concat(e).concat(n).concat(r)}(i,o);lt(a,L(i,"&","="),"GET",null,Zo)}(a,"/t/1/tl/event")}))},ti={session:function(){return Je.getSession()}},ei={pageCorrelationId:function(){return Qe.get("corrid")}},ni="tccl";return Jo=new _o,Je=Jo,pe(Mo),function(t){var e=t.legacyName,n=t.configManagerProps,r=t.hooks.beforeInit;!function(o){try{var i,a=l().cookie;Object.defineProperty(document,"cookie",{get:function(){return a},set:function(t){(i=i||Object.getOwnPropertyDescriptor(Document.prototype,"cookie")).set.call(document,t),a=i.get.call(document)},configurable:!0,enumerable:!0}),function(){if(a=p().userAgent.toLowerCase(),!/msie [1-8]\./.test(a))if(i="_".concat(e,"Internal"),u=i,void 0!==s()[u]||(s()[u]={},0))g("SCC Library has already been loaded on page");else if(function(t){var e=t.dataLayerName,n=t.clientConfigPrefixes,r=t.ignoredProperties,o=t.legacyName;Lt=o,Ut=r||[],At=e,Ft=n,Dt=s()[At]||[],_(At,Dt),S("".concat(At,"Log"),Vt),Wt()}(n),r&&r(),"off"!==It.get("".concat(e,".status"))){var o=l();"prerender"!==o.visibilityState?lo(t):o.addEventListener("visibilitychange",(function(){"prerender"!==o.visibilityState&&"unloaded"!==o.visibilityState&&lo(t)}))}var i,a}()}finally{delete l().cookie}}()}({legacyName:ni,trfqMethods:r,configManagerProps:{legacyName:ni,dataLayerName:"_trfd",clientConfigPrefixes:[ni]},dataLayerConfig:{pageViewSchema:"add_page_view",autoPageViewDisabled:!1,immediateSchemas:["add_page_view"]},globalContextConfig:{contextFnMap:{"context.userType":function(){return"c2"},"context.visitorId":function(t){return t.session.visitorGuid},"context.sessionId":function(t){return t.session.visitGuid},"page.sessionPageViewCount":function(t){return t.session.pageCount}},paramsFnMap:ti},hooks:{getEnvironment:function(){var t=It.get("".concat(ni,".baseHost"));if(t)return"secureserver.net"===t?"prod":"test-secureserver.net"===t?"test":"dev"},onLoad:function(){S(Zo,[]),s()._signalsDataLayer=s()._signalsDataLayer||[],s()._signalsDataLayer.push({schema:"subscribe",data:{name:"scc-plugin-sink-event-service",batch:!0,callback:Yo,schemaIds:Xo,fields:["webContext"]}})},beforeLoad:function(){pn.init({contextFnMap:ei})}}}),e})()));